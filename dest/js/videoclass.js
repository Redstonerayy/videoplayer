class VideoPlayer{constructor(e){this.videoplayer=document.querySelector(`#${e}`),this.videoplayer.addEventListener("mouseenter",e=>{this.videocontrols.style.visibility="visible",clearTimeout(this.hidecontrolstimeout),this.hidecontrolstimeout=setTimeout(()=>{this.videocontrols.style.visibility="hidden"},3e3)}),this.videoplayer.addEventListener("mouseleave",e=>{this.videocontrols.style.visibility="hidden"}),this.videoplayer.addEventListener("mousemove",e=>{this.videocontrols.style.visibility="visible",clearTimeout(this.hidecontrolstimeout),this.mouseovercontrols||(this.hidecontrolstimeout=setTimeout(()=>{this.videocontrols.style.visibility="hidden"},3e3))}),this.videocontainer=document.querySelector(`#${e} > .videos`),this.videocontainer.addEventListener("click",e=>{this.video.paused?this.togglePlay("play"):this.togglePlay("pause")}),this.video=document.querySelector(`#${e} > .videos > .video`),this.video.volume=.3,this.video.addEventListener("loadedmetadata",e=>{var t=this.secondsTo_hhmmss(Math.round(this.video.duration)),s=t[0]?t[0]+":":"",o=t[1]?t[1]+":":"",t=(t[2]<10?"0":"")+t[2];this.time.innerHTML=`0:00 / ${s}${o}${t}`,this.videolength=`${s}${o}${t}`,this.progressbar.max=this.video.duration}),this.video.addEventListener("timeupdate",e=>{this.progressbar.value=this.video.currentTime;var t=this.video.currentTime/this.video.duration;this.currentposition.style.left=`${this.progressbar.offsetWidth*t}px`;var s=this.secondsTo_hhmmss(Math.round(this.video.currentTime)),o=s[0]?s[0]+":":"",t=s[1]?s[1]+":":"0:",s=(s[2]<10?"0":"")+s[2];this.time.innerHTML=`${o}${t}${s} / ${this.videolength}`}),this.video.addEventListener("ended",e=>{}),this.shadowvideo=document.querySelector(`#${e} > .videos > .shadow-video`),this.statecontainer=document.querySelector(`#${e} > .video-state-container`),this.stateimg=document.querySelector(`#${e} > .video-state-container > .state-img`),this.canvas=document.querySelector(`#${e} > .preview-canvas`),this.canvascontext=this.canvas.getContext("2d"),this.videocontrols=document.querySelector(`#${e} > .video-controls`),this.videocontrols.addEventListener("mouseenter",e=>{this.mouseovercontrols=!0}),this.videocontrols.addEventListener("mouseleave",e=>{this.mouseovercontrols=!1}),this.progresscontainer=document.querySelector(`#${e} > .video-controls > .progress`),this.progresscontainer.addEventListener("mousedown",e=>{e=e.pageX-this.getAbsoluteX(this.progressbar);this.updateProgressBar(e),this.progressDown=!0}),this.progresscontainer.addEventListener("mouseenter",e=>{this.currentposition.style.display="block",this.canvas.style.display="flex"}),this.progresscontainer.addEventListener("mouseleave",e=>{this.currentposition.style.display="none",this.canvas.style.display="none"}),this.progresscontainer.addEventListener("mousemove",e=>{e=e.pageX-this.getAbsoluteX(this.progressbar);let t=e-this.canvas.offsetWidth/2;t=t<10?10:t,t=this.video.videoWidth-t<10+this.canvas.offsetWidth?this.video.videoWidth-(this.canvas.offsetWidth+10):t,this.canvas.style.left=`${t}px`,e/=this.progressbar.offsetWidth;e=this.video.duration*e;this.shadowvideo.currentTime=e,this.canvascontext.drawImage(this.shadowvideo,0,0,this.video.videoWidth,this.video.videoHeight,0,0,this.canvas.width,this.canvas.height)}),this.progressbar=document.querySelector(`#${e} > .video-controls > .progress > .video-progress`),this.currentposition=document.querySelector(`#${e} > .video-controls > .progress > .current-position`),this.controls=document.querySelector(`#${e} > .video-controls > .controls`),this.playpause=document.querySelector(`#${e} > .video-controls > .controls > .left-controls > .track-controls > .playpause`),this.playpause.addEventListener("click",e=>{this.video.paused?this.togglePlay("play"):this.togglePlay("pause")}),this.volumecontrol=document.querySelector(`#${e} > .video-controls > .controls > .left-controls > .volume-control`),this.volumecontrol.addEventListener("wheel",e=>{e.deltaY<0?this.volumeslider.value=parseFloat(this.volumeslider.value)+10:this.volumeslider.value=this.volumeslider.value-10,this.video.volume=this.volumeslider.value/100,this.volumesliderfill.style.width=`${this.volumeslider.value/2}px`,this.updateVolumeIcon(this.volumeslider.value)}),this.volumecontrol.addEventListener("mouseenter",e=>{this.volumeslidercontainer.style.display="flex"}),this.volumecontrol.addEventListener("mouseleave",e=>{this.volumeslidercontainer.style.display="none"}),this.volume=document.querySelector(`#${e} > .video-controls > .controls > .left-controls > .volume-control > .volume`),this.volume.addEventListener("click",e=>{this.video.muted?this.toggleMute("unmute"):this.toggleMute("mute")}),this.volumeslidercontainer=document.querySelector(`#${e} > .video-controls > .controls > .left-controls > .volume-control > .volume-slider-container`),this.volumeslider=document.querySelector(`#${e} > .video-controls > .controls > .left-controls > .volume-control > .volume-slider-container > .volume-slider`),this.volumeslider.addEventListener("mousedown",e=>{e=e.pageX-this.getAbsoluteX(this.volumeslider);this.updateVolume(e*=2)}),this.volumeslider.addEventListener("mousemove",e=>{this.mouseDown&&(e=e.pageX-this.getAbsoluteX(this.volumeslider),this.updateVolume(e*=2))}),this.volumesliderfill=document.querySelector(`#${e} > .video-controls > .controls > .left-controls > .volume-control > .volume-slider-container > .volume-slider-fill`),this.time=document.querySelector(`#${e} > .video-controls > .controls > .left-controls > .time > .time-span`),this.fullscreen=document.querySelector(`#${e} > .video-controls > .controls > .right-controls > .screen-modes > .fullscreen`),this.fullscreen.addEventListener("click",e=>{this.toggleFullScreen()}),this.mouseDown=!1,this.progressDown=!1,this.hidecontrolstimeout=void 0,this.videolength=void 0,document.addEventListener("mousedown",()=>{this.mouseDown=!0}),document.addEventListener("mouseup",()=>{this.progressDown&&!this.video.ended&&this.togglePlay("play"),this.mouseDown=!1,this.progressDown=!1}),document.addEventListener("mousemove",e=>{this.progressDown&&(this.video.paused||this.togglePlay("pause"),this.currentposition.style.display="block",e=e.pageX-this.getAbsoluteX(this.progressbar),this.updateProgressBar(e))}),window.addEventListener("mouseleave",e=>{null==e.toElement&&(this.mouseDown=!1,this.progressDown&&!this.video.ended&&this.togglePlay("play"),this.progressDown=!1)})}getAbsoluteX(e){return e==document.body||null==e.offsetParent?0:this.getAbsoluteX(e.offsetParent)+e.offsetLeft}secondsTo_hhmmss(e){var t=(e-e%60)/60;return[(t-t%60)/60,t%=60,e%60]}updateVolume(e){this.video.volume=(e=100<(e=e<0?0:e)?100:e)/100,this.updateVolumeIcon(e),this.volumeslider.value=e,this.volumesliderfill.style.width=`${this.volumeslider.value/2}px`}updateVolumeIcon(e){50<e?(this.volume.src="img/volumeloud.svg",this.video.muted=!1):0<e?(this.volume.src="img/volumelow.svg",this.video.muted=!1):this.volume.src="img/muted.svg"}updateProgressBar(e){e=(e=e<0?0:e)>this.progressbar.offsetWidth?this.progressbar.offsetWidth:e,this.currentposition.style.left=`${e}px`,e/=this.progressbar.offsetWidth,this.video.currentTime=this.video.duration*e,this.progressbar.value=this.progressbar.max*e}togglePlay(e){"play"==e?(this.video.play(),this.playpause.src="img/pause.svg",this.stateimg.src="img/pause.svg",this.statecontainer.style.display="block",this.statecontainerhide=setTimeout(()=>{this.statecontainer.style.display="none"},500),this.videocontrols.style.visibility="visible",this.hidecontrolstimeout=setTimeout(()=>{this.videocontrols.style.visibility="hidden"},3e3)):(this.video.pause(),this.playpause.src="img/play.svg",this.stateimg.src="img/play.svg",this.statecontainer.style.display="block",this.statecontainerhide=setTimeout(()=>{this.statecontainer.style.display="none"},500),this.videocontrols.style.visibility="visible",clearInterval(this.hidecontrolstimeout),this.hidecontrolstimeout=null)}toggleMute(e){"unmute"==e?(this.video.muted=!1,this.volume.src="img/volumeloud.svg"):(this.video.muted=!0,this.volume.src="img/muted.svg")}toggleFullScreen(){document.fullscreenElement==this.videoplayer?(document.exitFullscreen(),this.fullscreen.src="img/enterfullscreen.svg"):(this.videoplayer.requestFullscreen(),this.fullscreen.src="img/leavefullscreen.svg")}}var videoplayer=new VideoPlayer("one"),two=new VideoPlayer("two");
//# sourceMappingURL=videoclass.js.map
