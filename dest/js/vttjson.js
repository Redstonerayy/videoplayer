function convertVttToJson(i){return new Promise((r,t)=>{var e={},n=[],a=!1,l=i.split("\n");l.forEach((r,t)=>{" "===r.replace(/<\/?[^>]+(>|$)/g,"")||""==r.replace(/<\/?[^>]+(>|$)/g,"")||(-1!==r.indexOf("--\x3e")?(a=!0,e.start&&n.push(clone(e)),e={start:timeString2ms(r.split("--\x3e")[0].trimRight().split(" ").pop()),end:timeString2ms(r.split("--\x3e")[1].trimLeft().split(" ").shift()),part:""}):""===r.replace(/<\/?[^>]+(>|$)/g,"")||" "===r.replace(/<\/?[^>]+(>|$)/g,"")||a&&(0!==n.length?n[n.length-1].part.replace(/<\/?[^>]+(>|$)/g,"")===r.replace(/<\/?[^>]+(>|$)/g,"")||(0===e.part.length?e.part=r:e.part=`${e.part} ${r}`,t===l.length-1&&n.push(clone(e))):(e.part=r,n.push(clone(e)),e.part="")))});var e=[],p=/(<([0-9:.>]+)>)/gi;n.forEach(r=>{strs=r.part.split();var t=strs.map(function(r){return r.replace(p,function(e){return e.split("").reduce(function(r,t){return`==${e.replace("<","").replace(">","")}`},0)})});cleanText=t[0].replace(/<\/?[^>]+(>|$)/g,""),cleanArray=cleanText.split(" "),resultsArray=[],cleanArray.forEach(function(r){var t,e;-1<r.indexOf("==")?(e=(t=r.split("=="))[0],t[1],""!=e&&"##"!=e&&resultsArray.push({word:cleanWord(r.split("==")[0]),time:timeString2ms(r.split("==")[1])})):resultsArray.push({word:cleanWord(r),time:void 0})}),r.words=resultsArray,r.part=r.part.replace(/<\/?[^>]+(>|$)/g,"")}),r(n)})}function timeString2ms(r,t){return(+(r=r.split("."))[1]||0)+1e3*((r=r[0].split(":"))[2]?3600*r[0]+60*r[1]+ +r[2]:r[1]?60*r[0]+ +r[1]:+r[0])}function cleanWord(r){return r.replace(/[^0-9a-z'-]/gi,"").toLowerCase()}function clone(r){if(null==r||"object"!=typeof r)return r;var t,e=r.constructor();for(t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}
//# sourceMappingURL=vttjson.js.map
